
# ========================
# 节点列表
# ========================
proxies:
- name: 直连
  type: direct
- name: 拒绝
  type: reject
- name: HK-01-香港
  type: ss
  server: hk01.example-airline.com
  port: 8388
  cipher: aes-256-gcm
  password: airline_password_01
- name: SG-01-新加坡
  type: vmess
  server: sg01.example-airline.com
  port: 443
  uuid: 12345678-abcd-1234-abcd-123456789abc
  alterId: 0
  cipher: auto
  tls: true
  skip-cert-verify: true
- name: US-01-美国
  type: trojan
  server: us01.example-airline.com
  port: 443
  password: trojan_password_01
  sni: us01.example-airline.com
  skip-cert-verify: true
port: 7890
socks-port: 7891
redir-port: 7892
# 混合端口 (HTTP/SOCKS5)
mixed-port: 7893
tproxy-port: 7895
# 允许局域网连接
allow-lan: true
# 运行模式 (rule/global/direct)
mode: rule
log-level: info
external-controller: 0.0.0.0:9090
secret: '123456'

# ========================
# DNS 设置 (防污染/分流)
# ========================
dns:
  ipv6: true
  enable: true
  enhanced-mode: fake-ip
  fake-ip-filter:
  - +.lan
  - +.local
  - geosite:cn
  fake-ip-filter-mode: blacklist
  fake-ip-range: 198.20.0.1/16
  listen: 0.0.0.0:7874
  nameserver:
  - 223.5.5.5
  - 119.29.29.29
  nameserver-policy:
    geosite:!cn:
    - https://223.5.5.5/dns-query
    - https://dns.pub/dns-query
    - tls://8.8.4.4
    geosite:cn:
    - 223.5.5.5
    - 119.29.29.29
  fallback:
  - https://cloudflare-dns.com/dns-query
  fallback-filter:
    geoip: true
    ipcidr:
    - 0.0.0.0/0
ipv6: false

# ========================
# TUN 模式 (虚拟网卡)
# ========================
tun:
  enable: true
  stack: gvisor
  device: utun
  endpoint-independent-nat: true
  auto-route: false
  auto-detect-interface: false
  auto-redirect: false
  strict-route: false
profile:
  store-selected: true
  store-fake-ip: true
default:
  type: select
  proxies: &id001
  - 所有-智选
  - 所有-手选
  - 香港-智选
  - 香港-手选
  - 台湾-手选
  - 日本-手选
  - 新加坡-手选
  - 韩国-手选
  - 美国-手选
  - 英国-手选
  - 其他-手选
  - 直连
  - 拒绝
default-direct:
  type: select
  proxies: &id002
  - 直连
  - 所有-智选
  - 所有-手选
  - 香港-智选
  - 其他-手选
  - 拒绝

# ========================
# 策略组 (分流逻辑)
# ========================
proxy-groups:
- type: select
  proxies: *id001
  name: ChatGPT
- type: select
  proxies: *id001
  name: Gemini
- type: select
  proxies: *id001
  name: Copilot
- type: select
  proxies: *id001
  name: Perplexity
- type: select
  proxies: *id001
  name: Claude
- type: select
  proxies: *id001
  name: Meta AI
- type: select
  proxies: *id001
  name: GitHub
- type: select
  proxies: *id001
  name: Reddit
- type: select
  proxies: *id001
  name: Telegram
- type: select
  proxies: *id001
  name: WhatsApp
- type: select
  proxies: *id001
  name: Facebook
- type: select
  proxies: *id001
  name: YouTube
- type: select
  proxies: *id001
  name: TikTok
- type: select
  proxies: *id001
  name: Netflix
- type: select
  proxies: *id001
  name: HBO
- type: select
  proxies: *id001
  name: Disney
- type: select
  proxies: *id001
  name: Amazon
- type: select
  proxies: *id001
  name: Crunchyroll
- type: select
  proxies: *id001
  name: Spotify
- type: select
  proxies: *id001
  name: Nvidia
- type: select
  proxies: *id001
  name: Crypto
- type: select
  proxies: *id001
  name: Google
- type: select
  proxies: *id001
  name: Test
- type: select
  proxies: *id001
  name: Block
- type: select
  proxies: *id001
  name: 国外
- type: select
  proxies: *id001
  name: 其他
- type: select
  proxies: *id002
  name: Apple
- type: select
  proxies: *id002
  name: Microsoft
- type: select
  proxies: *id002
  name: Steam
- type: select
  proxies: *id002
  name: Games
- type: select
  proxies: *id002
  name: 国内
- name: 所有-手选
  type: select
  proxies:
  - HK-01-香港
  - SG-01-新加坡
  - US-01-美国
- name: 所有-智选
  type: url-test
  interval: 300
  proxies:
  - HK-01-香港
  - SG-01-新加坡
  - US-01-美国
  url: http://www.gstatic.com/generate_204
- name: 香港-手选
  type: select
  proxies:
  - HK-01-香港
- name: 香港-智选
  type: url-test
  interval: 300
  proxies:
  - HK-01-香港
  url: http://www.gstatic.com/generate_204
- name: 台湾-手选
  type: select
  proxies: []
- name: 台湾-智选
  type: url-test
  interval: 300
  proxies: []
  url: http://www.gstatic.com/generate_204
- name: 日本-手选
  type: select
  proxies: []
- name: 日本-智选
  type: url-test
  interval: 300
  proxies: []
  url: http://www.gstatic.com/generate_204
- name: 新加坡-手选
  type: select
  proxies:
  - SG-01-新加坡
- name: 新加坡-智选
  type: url-test
  interval: 300
  proxies:
  - SG-01-新加坡
  url: http://www.gstatic.com/generate_204
- name: 韩国-手选
  type: select
  proxies: []
- name: 韩国-智选
  type: url-test
  interval: 300
  proxies: []
  url: http://www.gstatic.com/generate_204
- name: 美国-手选
  type: select
  proxies:
  - US-01-美国
- name: 美国-智选
  type: url-test
  interval: 300
  proxies:
  - US-01-美国
  url: http://www.gstatic.com/generate_204
- name: 英国-手选
  type: select
  proxies: []
- name: 英国-智选
  type: url-test
  interval: 300
  proxies: []
  url: http://www.gstatic.com/generate_204
- name: 其他-手选
  type: select
  proxies: []
- name: 其他-智选
  type: url-test
  interval: 300
  proxies: []
  url: http://www.gstatic.com/generate_204

# ========================
# 分流规则 (从上至下匹配)
# ========================
rules:
- IP-CIDR,127.0.0.0/8,直连,no-resolve
- IP-CIDR,10.0.0.0/8,直连,no-resolve
- IP-CIDR,172.16.0.0/12,直连,no-resolve
- IP-CIDR,192.168.0.0/16,直连,no-resolve
- IP-CIDR,169.254.0.0/16,直连,no-resolve
- RULE-SET,TEST / Domain,Test
- RULE-SET,Block / Domain,Block
- RULE-SET,ChatGPT / Domain,ChatGPT
- RULE-SET,Claude / Domain,Claude
- RULE-SET,Meta AI / Domain,Meta AI
- RULE-SET,Perplexity / Domain,Perplexity
- RULE-SET,Copilot / Domain,Copilot
- RULE-SET,Gemini / Domain,Gemini
- RULE-SET,Reddit / Domain,Reddit
- RULE-SET,GitHub / Domain,GitHub
- RULE-SET,Telegram / Domain,Telegram
- RULE-SET,Telegram / IP,Telegram
- RULE-SET,WhatsApp / Domain,WhatsApp
- RULE-SET,Facebook / Domain,Facebook
- RULE-SET,Apple / Domain,Apple
- RULE-SET,Apple-CN / Domain,Apple
- RULE-SET,Microsoft / Domain,Microsoft
- RULE-SET,OKX / Domain,Crypto
- RULE-SET,Bybit / Domain,Crypto
- RULE-SET,Binance / Domain,Crypto
- RULE-SET,Youtube / Domain,YouTube
- RULE-SET,TikTok / Domain,TikTok
- RULE-SET,Netflix / Domain,Netflix
- RULE-SET,Netflix / IP,Netflix,no-resolve
- RULE-SET,Disney / Domain,Disney
- RULE-SET,Amazon / Domain,Amazon
- RULE-SET,Crunchyroll / Domain,Crunchyroll
- RULE-SET,HBO / Domain,HBO
- RULE-SET,Spotify / Domain,Spotify
- RULE-SET,Steam / Domain,Steam
- RULE-SET,Epic / Domain,Games
- RULE-SET,EA / Domain,Games
- RULE-SET,Blizzard / Domain,Games
- RULE-SET,UBI / Domain,Games
- RULE-SET,PlayStation / Domain,Games
- RULE-SET,Nintend / Domain,Games
- RULE-SET,Google / Domain,Google
- RULE-SET,Google / IP,Google,no-resolve
- RULE-SET,Nvidia / Domain,Nvidia
- RULE-SET,Telegram / IP,国外
- RULE-SET,Telegram / Domain,国外
- RULE-SET,Proxy / Domain,国外
- RULE-SET,Globe / Domain,国外
- RULE-SET,Direct / Domain,国内
- RULE-SET,China / Domain,国内
- RULE-SET,China / IP,国内,no-resolve
- RULE-SET,Private / Domain,国内
- MATCH,其他
rule-anchor:
  ip:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
  domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
  class:
    type: http
    interval: 86400
    behavior: classical
    format: text

# ========================
# 规则集源 (自动更新)
# ========================
rule-providers:
  TEST / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Check.list
  ChatGPT / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/openai.mrs
  Claude / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Claude/Claude.list
  Meta AI / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/MetaAi.list
  Perplexity / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/perplexity.mrs
  Copilot / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Copilot.list
  Gemini / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Gemini.list
  GitHub / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/github.mrs
  Telegram / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/telegram.mrs
  Telegram / IP:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/telegram.mrs
  WhatsApp / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Whatsapp/Whatsapp.list
  Facebook / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.mrs
  Amazon / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/amazon.mrs
  Apple-CN / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple-cn.mrs
  Apple / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.mrs
  Microsoft / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.mrs
  OKX / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/okx.mrs
  Bybit / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bybit.mrs
  Binance / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/binance.mrs
  TikTok / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.mrs
  Netflix / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/netflix.mrs
  Netflix / IP:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/netflix.mrs
  Disney / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/disney.mrs
  HBO / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hbo.mrs
  Spotify / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/spotify.mrs
  Steam / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/steam.mrs
  Epic / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.list
  EA / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/EA/EA.list
  Blizzard / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Blizzard/Blizzard.list
  UBI / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/UBI/UBI.list
  PlayStation / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/PlayStation/PlayStation.list
  Nintend / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Nintendo/Nintendo.list
  Proxy / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Proxy.list
  Globe / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list
  Direct / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Direct.list
  China / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/cn.mrs
  China / IP:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.mrs
  Private / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/private.mrs
  Block / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Block.list
  Nvidia / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Nvidia/Nvidia.list
  Crunchyroll / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Crunchyroll.list
  Reddit / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/reddit.mrs
  Youtube / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.mrs
  Google / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google.mrs
  Google / IP:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/google.mrs
