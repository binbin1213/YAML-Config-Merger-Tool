# Skill Metadata（技能元数据）
Name: YAML Config Merge Scheme Generator
Scope: YAML-Config-Merger-Tool 项目配置合并策略制定
Version: 1.0.0
Description: 根据用户提供的多个 YAML 配置文件，生成贴合项目的合并方案（含合并顺序、冲突处理规则、输出配置格式）

# Trigger Phrases（触发关键词）
- "生成 YAML 配置合并方案"
- "制定多配置文件合并策略"
- "如何处理配置合并时的冲突"
- "指定合并顺序和输出格式"
- "帮我规划 YAML 配置合并步骤"

# Step-by-Step Instructions（分步操作指南）
1.  先识别用户提供的所有待合并配置文件（区分「基础配置」「环境配置」「自定义配置」）；
2.  第一步确定合并优先级：默认遵循「基础配置 < 环境配置（dev/test/prod） < 自定义配置」的覆盖顺序，支持用户自定义调整；
3.  第二步制定冲突处理规则：针对同名配置项，按优先级高的覆盖优先级低的；针对数组类型配置项，支持「追加」「去重追加」「覆盖」三种模式（默认追加）；针对嵌套节点，递归进行合并/覆盖；
4.  第三步指定输出配置：确定输出 YAML 文件的保存路径、缩进格式（2 空格）、编码格式（UTF-8）、是否保留注释（默认保留）；
5.  第四步生成可直接执行的工具命令：基于项目 CLI 格式，拼接包含「输入文件路径」「合并规则」「输出路径」的完整命令；
6.  最后整理合并方案，包含优先级说明、冲突处理细节、执行命令、注意事项。

# Examples（示例）
## 输入
"我有 3 个配置文件：base.yaml（基础配置）、dev.yaml（开发环境配置）、custom.yaml（自定义配置），想合并后输出到 ./output/dev-merged.yaml，数组配置要去重，帮我生成合并方案"

## 输出
"YAML 配置合并方案：
1.  合并优先级：base.yaml < dev.yaml < custom.yaml（自定义配置覆盖环境配置，环境配置覆盖基础配置）；
2.  冲突处理规则：
    - 普通键值对：高优先级配置覆盖低优先级配置；
    - 数组类型配置：采用「去重追加」模式，保留所有唯一元素，按优先级顺序追加；
    - 嵌套节点：递归合并，子节点冲突遵循上述规则；
3.  输出配置：
    - 保存路径：./output/dev-merged.yaml
    - 缩进格式：2 空格（项目默认）
    - 编码格式：UTF-8
    - 注释保留：是
4.  执行命令：
    python yaml_merger.py --input base.yaml dev.yaml custom.yaml --array-strategy deduplicate --output ./output/dev-merged.yaml --keep-comments
5.  注意事项：
    - 请确保 ./output 目录已存在，否则工具会报错；
    - 若存在相同层级的非数组/非键值对节点冲突，工具会默认保留高优先级配置。"

# Constraints（约束条件）
- 仅针对 YAML-Config-Merger-Tool 项目的 CLI 命令格式生成合并方案，不支持其他工具的命令语法；
- 数组合并策略仅支持「追加」「去重追加」「覆盖」三种（项目预设），不支持自定义策略；
- 不处理超过 5 个配置文件的合并场景，避免复杂度过高。